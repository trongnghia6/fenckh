<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Học Viện Kỹ Thuật Mật Mã</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../../bootstrap-5.3.3-dist/bootstrap-icons-1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="/css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

  <nav class="navbar-top ">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <img src="/Logo-Hoc-Vien-Ky-Thuat-Mat-Ma-ACTVN.webp" alt="Logo">
        <div class="navbar-title">
          <img src="/dongchu_banner.png" alt="banner">
        </div>
      </a>
    </div>
  </nav>

  <!-- Phần dưới của navbar chứa các mục nằm ngang -->
  <nav class="navbar navbar-expand-lg navbar-bottom ">
    <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link active" id="Home" href="">HOME</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" id="ThongTinGD" href="">Thông tin GD</a>
          </li>
          <!-- <li> -->
          <li class="nav-item">
            <!-- <a class="nav-link" href="/import">Import danh sách giảng viên mời</a> -->
            <a class="nav-link" id="Import" href="">Import</a>
          </li>
          <!-- <li class="nav-item">
              <a class="nav-link" href="#">Duyệt</a>
            </li> -->
          <li class="nav-item">
            <a class="nav-link" href="/gvmList">Danh sách giảng viên mời</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/classInfoGvm">Thông tin lớp giảng viên mời</a>
          </li>
         <!-- Thông tin HD giảng viên mời-->>
         <li class="nav-item"></li>
         <a  class="nav-link active" href="/infoHDGvm" role="button">Thông tin HD Gvm</a>
     </li>
          <!--  -->
          <!-- <li class="nav-item">
              <a class="nav-link" href="/maindt/tableQC">Bảng quy chuẩn</a>
            </li> -->
          <div class="navbar-nav">
            <div class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="/login" id="navbarDropdownUser" data-bs-toggle="dropdown"
                aria-expanded="false">
                Hi, Lê Đức Thuận
              </a>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item" href="#">Thông tin cá nhân</a>
                <a class="dropdown-item" href="/">Đăng xuất</a>
              </div>
            </div>
        </ul>
      </div>
    </div>
  </nav>
  </div>


  <!-- Phần trên của navbar chứa logo và tiêu đề -->
  <div class="container my-4">
    <!-- Tiêu đề dashboard -->
    <h1 class="text-center">Dashboard Giảng Dạy Khoa</h1>

    <!-- 1. Tổng quan về số lớp và số tiết giảng dạy -->
    <div class="row my-4">
      <div class="col-lg-6 col-md-12">
        <div class="card text-white bg-info mb-3">
          <div class="card-body">
            <h5 class="card-title">Tổng số lớp giảng dạy</h5>
            <p class="card-text">20 Lớp</p>
          </div>
        </div>
      </div>
      <div class="col-lg-6 col-md-12">
        <div class="card text-white bg-danger mb-3">
          <div class="card-body">
            <h5 class="card-title">Tổng số tiết giảng dạy</h5>
            <p class="card-text">200 Tiết</p>
          </div>
        </div>
      </div>
    </div>

    <!-- 2. Danh sách các lớp giảng dạy -->
    <div class="container my-4">
      <h3>Danh sách các lớp giảng dạy</h3>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>#</th>
            <th>Tên lớp</th>
            <th>Môn học</th>
            <th>Số tiết giảng dạy</th>
            <th>Giáo viên phụ trách</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">1</th>
            <td>Class A</td>
            <td>Toán Cao Cấp</td>
            <td>45</td>
            <td>Nguyễn Văn A</td>
          </tr>
          <tr>
            <th scope="row">2</th>
            <td>Class B</td>
            <td>Lý Thuyết Mạng</td>
            <td>30</td>
            <td>Trần Thị B</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- 3. Thống kê số tiết giảng dạy theo giáo viên -->
    <div class="container my-4">
      <h3>Thống kê số tiết giảng dạy theo giáo viên</h3>
      <canvas id="teachingHoursChart"></canvas>
    </div>

    <!-- 4. Nút quay về đầu trang -->
    <div class="container my-4">
      <footer class="text-center">
        <button onclick="topFunction()" id="backToTopBtn" class="btn btn-secondary">Quay về đầu trang</button>
      </footer>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // 3. Thống kê số tiết giảng dạy theo giáo viên (Sử dụng Chart.js)
    var ctx = document.getElementById('teachingHoursChart').getContext('2d');
    var teachingHoursChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Nguyễn Văn A', 'Trần Thị B', 'Lê Văn C'],
        datasets: [{
          label: 'Số tiết giảng dạy',
          data: [45, 30, 25],
          backgroundColor: ['rgba(75, 192, 192, 0.2)', 'rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)'],
          borderColor: ['rgba(75, 192, 192, 1)', 'rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)'],
          borderWidth: 1
        }]
      }
    });
    // Nút quay về đầu trang
    function topFunction() {
      document.body.scrollTop = 0; // Cho Safari
      document.documentElement.scrollTop = 0; // Cho Chrome, Firefox, IE và Opera
    }
  </script>

  <!-- Phần phân quyền -->
  <!-- <script>
    async function fetchRole() {
      try {
        const response = await fetch('/api/getRole');
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        const role = await response.json();
        return role;
      } catch (error) {
        console.error('Error fetching data:', error);
      }
    }

    async function ThongTinGD() {
      const role = await fetchRole();
      console.log(role);

      if (role.includes("DAOTAO") || role.includes("XEM") || role.includes("TAICHINH")) {
        window.location.href = "/info2"; // Chuyển hướng đến trang mong muốn
      } else {
        window.location.href = "/info"; // Chuyển hướng đến trang mong muốn
      }
    }

    async function Import() {
      const role = await fetchRole();

      if (role.includes("CNTT")) {
        window.location.href = "/importGvmList"; // Chuyển hướng đến trang mong muốn
      } else if (role.includes("DAOTAO")) {
        window.location.href = "/import"; // Chuyển hướng đến trang mong muốn
      }  // thêm quyền vào đây
    }

    async function Home() {
      const role = await fetchRole();

      if (role.includes("CNTT")) {
        window.location.href = "/mainkhoa"; // Chuyển hướng đến trang mong muốn
      } else if (role.includes("DAOTAO")) {
        window.location.href = "/maindt"; // Chuyển hướng đến trang mong muốn
    }  // thêm quyền vào đây
  }

   </script> -->

  <!-- Phần phân quyền -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Thêm sự kiện click cho phần tử có id "import"
      const importLink = document.getElementById("Import");
      
      importLink.addEventListener("click", function(event) {
          event.preventDefault(); // Ngăn chặn hành vi mặc định của liên kết
          
          const role = localStorage.getItem("userRole"); // Lấy role từ localStorage
          
          if (role.includes("DAOTAO")||role.includes("TAICHINH")){
            window.location.href = "/import";
          } else {
            window.location.href = "/importGvmList";
          }
      });

      // Thêm sự kiện click cho phần tử có id="ThongTinGD"
      const ThongTinGD = document.getElementById("ThongTinGD");
      
      ThongTinGD.addEventListener("click", function(event) {
          event.preventDefault(); // Ngăn chặn hành vi mặc định của liên kết
          
          const role = localStorage.getItem("userRole"); // Lấy role từ localStorage
                  
          if (role.includes("DAOTAO")||role.includes("TAICHINH")){
            window.location.href = "/info2";
          } else {
            window.location.href = "/info";
          }
      });

      // Thêm sự kiện click cho phần tử có id="Home"

      const Home = document.getElementById("Home");
      
      Home.addEventListener("click", function(event) {
          event.preventDefault(); // Ngăn chặn hành vi mặc định của liên kết
          
          const role = localStorage.getItem("userRole"); // Lấy role từ localStorage
          
          if (role.includes("DAOTAO")||role.includes("TAICHINH")){
            window.location.href = "/maindt";
          } else {
            window.location.href = "/mainkhoa";
          }
      });
    });

  </script>

</body>